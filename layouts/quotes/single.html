{{ define "content" }}
<div class="application-main">
  <div>
    <main>
      <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
        <div class="px-0">
          <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
            <div class="flex-auto min-width-0 width-fit mr-3">
              <div class="d-flex">
                <div class="d-none d-md-block">
                  <a class="avatar mr-2 flex-shrink-0" href="{{ .Site.BaseURL }}">
                    <img class=" avatar-user"
                      src="{{ with $.Site.Params.avatar }}{{ $.Site.Params.avatar }}{{ else }}{{ "images/avatar.png" | absURL }}{{ end }}"
                      width="32" height="32"></a>
                </div>
                <div class="d-flex flex-column">
                  <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                    <span class="author">
                      <a href="{{ .Site.BaseURL }}">{{ .Site.Params.author }}</a>
                    </span>
                    <span class="path-divider">/</span>
                    <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px">
                      <a href="{{ .Permalink }}">{{ .Title }}</a>
                    </strong>
                  </h1>
                  <div class="note m-0">
                    Created <relative-time datetime="{{ .PublishDate.Format "Mon, 02 Jan 2006 15:04:05 -0700" }}"
                      class="no-wrap">
                      {{ .PublishDate.Format "Mon, 02 Jan 2006 15:04:05 -0700" }}</relative-time>

                    {{ if .Site.Params.lastmod }}
                    <span class="file-info-divider"></span>
                    Modified <relative-time datetime="{{ .Lastmod.Format "Mon, 02 Jan 2006 15:04:05 -0700" }}"
                      class="no-wrap">
                      {{ .Lastmod.Format "Mon, 02 Jan 2006 15:04:05 -0700" }}</relative-time>
                    {{ end }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="container-lg px-3 new-discussion-timeline">
        <div class="repository-content gist-content">
          <div>
            <div class="js-gist-file-update-container js-task-list-container file-box">
              <div id="file-pytest" class="file my-2">
                <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                  <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                    <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                      {{ with .Params.attribution_confidence }}
                      <span class="text-gray">Confidence: {{ . }}</span>
                      <span class="file-info-divider"></span>
                      {{ end }}
                      {{ countwords .Content }} Words
                    </div>
                    <div class="file-actions flex-order-2 pt-0">
                      {{ with .Params.tags }}
                      {{ range $tag := . }}
                      <a class="muted-link mr-3" href="{{ absURL (print "tags/" . | urlize) }}">
                        <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                          <path fill-rule="evenodd"
                            d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                          </path>
                        </svg>
                        {{ $tag }}
                      </a>
                      {{ end }}
                      {{ end }}
                    </div>
                  </div>
                </div>

                <div class="Box-body px-5 pb-5" style="z-index: 1">
                  <article class="markdown-body entry-content container-lg">
                    {{ with .Params.quote }}
                    {{ if $.Params.image }}
                    <div style="margin: 1em 0 2em; position: relative;">
                      {{/* Quote box: upper-left, overlaps image significantly */}}
                      <div style="position: relative; z-index: 2; width: 70%;">
                        <blockquote style="font-size: 1.5em; font-weight: 600; line-height: 1.4; border-left: 5px solid #0366d6; padding: 0.75em 1.25em; margin: 0; background: rgba(246,248,250,0.88); border-radius: 3px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); backdrop-filter: blur(2px);">
                          <p style="margin: 0;">{{ . }}</p>
                        </blockquote>
                        <p style="margin: 0.4em 0 0; padding: 0.2em 0.5em; color: #586069; font-weight: 500; background: rgba(246,248,250,0.88); display: inline-block; border-radius: 2px;">
                          &mdash;
                          {{ with $.Params.link }}<a href="{{ . }}">{{ $.Params.attribution }}</a>{{ else }}{{ $.Params.attribution }}{{ end }}
                        </p>
                      </div>
                      {{/* Image box: lower-right, overlaps under quote by ~6em */}}
                      <div style="width: 55%; margin-left: auto; margin-top: -6em; position: relative; z-index: 1;">
                        <img src="{{ $.Params.image }}" alt="Watercolor illustration inspired by this quote"
                             style="width: 100%; height: auto; display: block; border-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.12);">
                      </div>
                    </div>
                    {{ else }}
                    <blockquote style="font-size: 1.25em; border-left: 4px solid #0366d6; padding: 0.5em 1em; margin: 1em 0; background: #f6f8fa;">
                      <p>{{ . }}</p>
                    </blockquote>
                    <p class="text-gray">
                      &mdash;
                      {{ with $.Params.link }}<a href="{{ . }}">{{ $.Params.attribution }}</a>{{ else }}{{ $.Params.attribution }}{{ end }}
                    </p>
                    {{ end }}
                    {{ end }}

                    {{ if .Content }}
                    <div style="background: #f8f4ef; margin: 0 -2em; padding: 1.5em 2em; border-radius: 4px; border-top: 3px solid #d4a574;">
                      <h3 style="margin-top: 0;">Reflection</h3>
                      {{- .Content -}}
                    </div>
                    {{ end }}

                    {{/* Previous / Next navigation */}}
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 2em; padding-top: 1em; border-top: 1px solid #e1e4e8;">
                      {{ with .PrevInSection }}
                      <a href="{{ .Permalink }}" style="display: inline-flex; align-items: center; color: #0366d6; text-decoration: none; font-weight: 500; padding: 0.5em 1em; border: 1px solid #e1e4e8; border-radius: 6px; background: #fafbfc; transition: background 0.15s;">
                        <svg style="margin-right: 0.5em;" width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path fill-rule="evenodd" d="M7.78 12.53a.75.75 0 01-1.06 0L2.47 8.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L4.81 7h7.44a.75.75 0 010 1.5H4.81l2.97 2.97a.75.75 0 010 1.06z"></path></svg>
                        {{ .Title }}
                      </a>
                      {{ else }}
                      <span></span>
                      {{ end }}
                      {{ with .NextInSection }}
                      <a href="{{ .Permalink }}" style="display: inline-flex; align-items: center; color: #0366d6; text-decoration: none; font-weight: 500; padding: 0.5em 1em; border: 1px solid #e1e4e8; border-radius: 6px; background: #fafbfc; transition: background 0.15s;">
                        {{ .Title }}
                        <svg style="margin-left: 0.5em;" width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path fill-rule="evenodd" d="M8.22 3.47a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06l2.97-2.97H3.75a.75.75 0 010-1.5h7.44L8.22 4.53a.75.75 0 010-1.06z"></path></svg>
                      </a>
                      {{ else }}
                      <span></span>
                      {{ end }}
                    </div>
                  </article>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
  {{ partial "gitalk.html" . }}
</div>
{{ end }}
